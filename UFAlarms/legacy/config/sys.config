[
    {ssl_options, [{reuse_sessions, false}]},
    {legacy, [
        {keepalive, 180000},
        {rabbitmq, [
            {host, "rabbitmq"}, %% rabbitmq_service
            {username, "farallones"},
            {password, "sensity1"},
            {timeout, 5000},
            {exchanges, [
                [{name, "node.commands"}, {type, "topic"}],
                [{name, "node.events"}, {type, "topic"}]
            ]},
            {publisher, [
                {size, 10}
            ]},
            {subscriber, [
                {'exchange', "node.commands"},
                {'key', "#"},
                {'queue', "legacy"},
                {'msg_handler', 'legacy_cmd_handler'}
            ]}
        ]},
        {s3, [
            {key, "AKIAJHXVVJ2KABYSEUTA"},
            {secret, "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"},
            {host, "s3-us-west-2.amazonaws.com"}
        ]},
        {ota, [
            {host, "127.0.0.1"}, %% legacy_ota
            {bucket, "sensity-firmware"},
            {workers, 10}
        ]},
        {metrics, [
            {interval, 30000},
            {graphite, [
                {prefix, "legacy"}, %% graphite_prefix
                {host, "127.0.0.1"}, %% graphite_service
                {port, 2003}, %% graphite_port
                {api_key, ""}
            ]}
        ]}
    ]},
    {gproc,[
        {gproc_dist, ['legacy@127.0.0.1']}
    ]},
    {lager, [
        {log_root, "/var/log/legacy"},
        {crash_log, "crash.log"},
        {handlers, [
            {lager_console_backend, [
                {level, info}, %% stdout_level
                {formatter_config,
                    [
                        "[", date, " ", time, "] ", pid, " [", severity,"]",  {nodeid, [" [", nodeid, "]"], ""}, " [",
                        {module, ""}, {function, [":", function], ""}, {line, [":", line], ""}, "] ", message, "\n"
                    ]
                }
            ]},
            {lager_stderr_backend, [
                {level, error}, %% stderr_level
                {formatter_config,
                    [
                        "[", date, " ", time, "] ", pid, " [", severity,"]",  {nodeid, [" [", nodeid, "]"], ""}, " [",
                        {module, ""}, {function, [":", function], ""}, {line, [":", line], ""}, "] ", message, "\n"
                    ]
                }
            ]}
        ]}
    ]}
].
